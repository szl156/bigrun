# 抓包

## HTTP/HTTPS抓包

- HTTP：http协议中，不对通信端进行身份验证，对于服务器来说，它接收到的HTTP请求报文只要格式符合规范就发送响应报文。所以对于HTTP抓包，只需要让中间人转发客户端和服务端的数据包

- HTTPS：HTTPS=HTTP+SSL/TSL

  中间人需要抓包，需要在HTTPS加密通信之前：

  1. 伪装成服务端，截取客户端发送的包含证书的报文，把自己的证书发给客户端，然后拿到【客户端返回的包含对称加密通信密钥的报文】，生成中间人与客户端对称加密的密钥
  2. 伪装成客户端，以服务端自己的非对称公钥加密【客户端返回的包含对称加密通信密钥的报文发送给服务端】，获得服务端生成的对称加密密钥

## 电脑抓包手机

1. 电脑本地创建服务进程，监听一个端口
2. 手机连接同一局域网，配置网络代理，指向电脑的IP和端口

## 抓包工具whistle

### 快速上手

1. 配置node环境

2. 安装whistle

   ```shell
   npm i -g whistle & w2 start
   w2 proxy // 设置全局代理
   w2 proxy off // 关闭全局代理
   ```

3. http://127.0.0.1:8899/查看抓包、修改请求